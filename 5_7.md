[Головна](README.md) > [5.Людино-машинний інтерфейс](5.md)

# 5.7. Ієрархія дисплеїв та навігація 

## 5.7.1. Ієрархія дисплеїв

Практично для всіх АСКТП кількість дисплеїв перевищує один. Тому при проектуванні та розробленні необхідно чітко визначитися з тим, які дисплеї будуть використовуватися для постійного перегляду і як відбуватиметься навігація по інших дисплеях. У стандарті ISA-101 рекомендується означити ієрархію дисплеїв, кожен рівень якого має певне призначення. Ця ієрархія потрібна для забезпечення надання оператору структурованого представлення всієї сфери їх відповідальності, забезпечуючи при цьому можливість перейти до більших рівнів деталізації та функціональності керування. Рекомендовано максимум чотири рівні ієрархії, причому рівень 1 має найширший обсяг, а рівень 4 – найбільшу деталізацію. Хоча ієрархічний характер рівнів відображати не обов'язково, він узгоджується з ієрархією навігації, яка може мати менше або більше рівнів. 

Дисплеї 1-го рівня використовуються для забезпечення огляду або зведення ключових параметрів, тривог, розрахованих показників проходження процесів та шляхів поширення збурень для всієї області контрольованої оператором на одному  робочому місці (рис. 5.28). У великих системах дисплеї 1-го рівня можуть показуватися на кількох моніторах, якщо їх необхідно бачити всі одночасно. Такі дисплеї мають найширший масштаб і найнижчий рівень деталізації процесу або системи. Дисплеї першого рівня можуть бути застосовані як інструмент спільного використання для забезпечення можливості обміну ключовою інформацією між операторами центрального та місцевих пунктів керування.

Дисплеїв 1-го рівня розробляються з урахуванням таких міркувань [1].

\1.   Для різних операційних режимів роботи установки слід розроблювати різні оглядові дисплеї. Наприклад, для неперервних процесів бажано розроблювати, окрім дисплеїв нормального режиму роботи, окремо дисплеї для процедур запуску та зупинки. 

\2.   Повинні відображатися усі тривоги з найвищим пріоритетом, розташовані з урахуванням функціональних відносин (тобто прикріплених візуально до відповідного обладнання або пристрою).

\3.   Повинні містити фактичні значення, аномальний статус і величину відхилення для ключових технологічних параметрів або розрахункових показників процесу, які відображають загальний стан частин технологічних процесів або сукупності обладнання (наприклад, печі, реактора або ректифікаційної колони). Якщо це можливо, рекомендується також забезпечити відображення величин відхилень, напрямів змін значень та/або тенденцій (наприклад трендів).

\4.   Рекомендується розміщувати додаткову інформацію про пов'язані з ним об'єкти заводу, такими як допоміжне виробництво (постачання пари, електроенергії тощо) або суміжні відділення.

![](media5/5_28.png)                               

*Рис. 5.28.* Приклад дисплею 1-го рівня

\5.   Рекомендується відображати вбудовані тренди про важливі параметри.

\6.   Дисплеї повинні орієнтувати оператора на існування, ступінь важливості, розміщення та напрямок зміни аномальних умов процесу.

\7.   Дисплеї, як правило, не повинні використовуватися для виконання керуючих функцій (наприклад зміни уставки регулятора).

Дисплеї 2-го рівня по суті є дисплейними мнемосхемами верхнього рівня для конкретного технологічного процесу або групи обладнання (рис. 5.29). Зазвичай вони містять більше деталей, ніж відображає рівень 1. Дисплеї 2-го рівня мають бути основним робочим дисплеєм оператора під час звичайних операцій типових змін і моніторингу. Вони можуть включати огляди апаратів або первинні дисплеї для кожної великої системи (наприклад, апарат, керований конкретним оператором). Їх часто називають загальними оглядами (overview) системи та підсистеми. Дисплеї 2-го рівня забезпечують легку навігацію до деталей, представлених на рівнях 3 та 4. В той час як дисплеї першого рівня забезпечують безперервний огляд області контрольованої оператором, дисплеї 2-го рівня повинні мати можливість дозволити операторові виконувати зміну завдання за допомогою обмеженої кількості дисплеїв і мінімальної навігації.

Дисплеї 2-го рівня розробляються з урахуванням таких міркувань.

\1.   Дисплеї розроблюються як первинні дисплеї для загальних оглядів технологічних апаратів.

\2.   Повинні відображати всі сигнали найвищого і середнього пріоритету для конкретної системи або підсистеми.

\3.   Повинні надавати чіткі сигнали для навігації до непоказаних на дисплеї тривог з низьким пріоритетом.

\4.   Повинні забезпечувати надання достатньої кількості інформації та засобів керування в основному інтерфейсі для керування системою для більшості умов.

\5.   Повинні містити первинні засоби керування для конкретної області процесу.

\6.   Повинні відображати задано-залежну інформацію для запуску та/або зупинки процесу.

![](media5/5_29.png) 

*Рис.5. 29.* Приклад дисплею 2-го рівня

Дисплеї 3-го рівня найкраще описуються як дисплеї відображення деталей системи або підсистеми. Вони, як правило, містять більше деталей, ніж дисплеї рівня 2. Дисплеї 3-го рівня повинні бути дисплеями, які оператор використовує для виконання нестандартних операцій, таких як керування виконавчими механізмами в ручному режимі, перемикання обладнання або інші рутинні завдання (рис. 5.30). Вони повинні надавати достатню інформацію для полегшення діагностики процесу і мають бути засновані на конкретних завданнях, що дає змогу операторові виконувати їх за допомогою обмеженої кількості дисплеїв і мінімальної навігації.

 

Дисплеї 3-го рівня розробляються з урахуванням таких міркувань:

\1.   Дисплеї містять контури керування та індикатори технологічного обладнання.

\2.   Дисплеї відображають тривоги для всіх пріоритетів.

\3.   Дисплеї відображають стан різних блокувань для відображеного обладнання.

Залежно від конкретного процесу, установки, проектування дисплея та загальної ієрархії відображення, ця інформація рівня 3 може бути об'єднана в представлення рівня 2 або 4.

 ![](media5/5_30.png)

*Рис. 5.30.* Приклад дисплею 3-го рівня

Дисплеї 4-го рівня найкраще описуються як діагностичні (налагоджувальні) дисплеї. Через такий тип дисплеїв повинна бути доступна уся інформація про систему. Дисплеї 4-го рівня не призначені для використання в керуванні усім процесом або системою, однак може бути доступна функціональність для здійснення керування конкретною точкою. Дисплеї 4-го рівня можуть не потребувати повноекранного відображення, що дає змогу відображати системну інформацію на панелях або в спливаючому вікні (рис. 5.31).

Дисплеї рівня 4 можуть, наприклад, використовуватися для:

‒    забезпечення експлуатаційних процедур для окремих частин обладнання;

‒    надання довідкової інформації для контролю та діагностики обладнання;

‒    відображення деталей безпечної зупинки;

‒    відображення інформації про блокування та дозволи.

![](media5/5_31.png) 

*Рис. 5.31*. Приклад дисплею 4-го рівня.

## 5.7.2. Навігація по дисплеях

Ефективна та інтуїтивна схема навігації безпосередньо впливає на швидкість втручання оператора в процес керування. Основними критеріями розроблення системи навігації є продуктивність, послідовність та інтуїтивність. Залежно від вимог користувача, для забезпечення робастного, швидкого та послідовного доступу до дисплеїв повинні бути передбачені кілька методів навігації. 

Методи навігації включають графічні символи на дисплеях, а також кнопки клавіатури, пункти меню, кнопки на панелі інструментів, дерева папок, вкладки та контекстні меню. Для внесення кількох змін в HMI на основі вибору оператором об'єктів або нового виклику дисплея також можуть використовуватися такі методи навігації, як захоплення. Захоплення може включати інші дисплеї, лицьові панелі, тренди та відповідні детальні дисплеї.

Для документування шляху між різними дисплеями може бути доцільним рисунок навігаційної мережі (рис. 5.32). Навігаційний рисунок повинен показувати шляхи переходів між дисплеями. 

Немає єдиного принципу побудови навігації, який підходить для всіх процесів. Він повинен відповідати функціональним вимогам HMI. У стандарті ISA-101 виділені наступні такі типи навігації.

\1.   **Ієрархічна навігація**. Це найбільш часто використовуваний принцип, де інформація структурована відповідно фізичній організації процесу, вона використовує структуру дерева, в якій нижні гілки надають більш конкретну інформацію, пов'язану з верхніми гілками і хребтом. Ієрархічна структура може бути описана з точки зору глибини (кількість рівнів в ієрархії) і ширини (кількість варіантів на вузол). Коли використовується ієрархічна структура навігації, то часто кожен рівень дисплеїв відображає певний рівень ієрархії устатковання, відповідно до стандартів IEC 62264 (ISA-95) і IEC 61512 (ISA-88) (див. підрозділ 9.2). Наприклад, найвищий рівень – завод, нижче – цех, далі – робочий центр або відділення, після чого – апарат або агрегат.

![](media5/5_32.png) 

*Рис. 5.32.* Приклад навігаційного рисунка в документації

\2.   **Реляційна навігація**. Реляційно-пов’язані дисплеї ґрунтуються на взаємозалежностях вузлів, які на них відображені. Так, можна будувати переходи по потоку речовини, або по енергетичних зв’язках (від виробника до споживача) тощо. Ця конструкція зазвичай містить навігаційні посилання з боку в бік.

\3.   **Послідовнісна навігація**. Ця навігація ґрунтується на відображенні певного кроку послідовності процесу, наприклад, для рецептурних порційних (Batch) виробництв. При такому підході набір сторінок та їх зміст в ієрархії може змінюватися залежно від партії. Перехід між сторінками – це перехід між кроками технологічного процесу. 

При розробленні навігації необхідно розглянути такі керівні принципи:

‒    доступ до дисплея повинен проводитися з якомога меншою кількістю натискань клавіш (табл.5.3); 

‒    оператор не повинен вводити назву дисплея або тегу, який необхідно відобразити, хоча повинна бути надана підтримка для такого способу;

‒    символи дисплеїв, які є навігаційними підказками, повинні мати послідовне та чітке візуальне кодування;

‒    у HMI бажано підтримувати навігацію окремо для нормальних умов і нештатних ситуацій;

‒    організацію навігації бажано проводити з урахуванням послідовної деталізації змісту;

‒    за можливості реалізації бажано автоматично відкривати дисплеї, пов’язані з вибраною інформацією.  

*Таблиця 5.3.* 

**Приклад швидкодії навігації по сторінках різного призначення** 

| **Метрика**                                                  | **Тип дисплея**                   | **Максимальний час/кількість  доступу** |
| ------------------------------------------------------------ | --------------------------------- | --------------------------------------- |
| Доступ до дисплеїв тривог                                    | Зведення тривог (активні тривоги) | 1 с                                     |
| Списки тривог, наприклад список відтермінованих тривог       | 5 с                               |                                         |
| Кількість кліків для переходу: клік може бути будь-якою  взаємодією користувача, наприклад, клацанням миші, вибором кнопки, вибором  програмної клавіші тощо | Критичні дисплеї                  | 1...2 кліки                             |
| Некритичні дисплеї                                           | 3 кліки                           |                                         |
| Зведення тривог                                              | 1 клік                            |                                         |
| Системна діагностика                                         | 1…2 кліки                         |                                         |
| Зміни в системі                                              | Зміна оператора                   | 5 с                                     |
| Зміна мови                                                   | 5 с                               |                                         |

 

Методи навігації включають:

‒    вбудовані гіперпосилання;

‒    відображення символів з гіперпосиланнями;

‒    головне меню: відображається для всього дисплея; 

‒    контексте меню: відображається для обраного об’єкта дисплея;

‒    дерева;

‒    закладки;

‒    панелі інструментів;

‒    панелі приладів/панелі завдань;

‒    кнопки на дисплеях;

‒    кнопки користувацької клавіатури (функція та інші користувацькі кнопки);

‒    контекстні меню (наприклад, клацання правою кнопкою миші для розкривного меню);

‒    механізми для отримання детальної інформації;

‒    посилання на каталоги файлів;

‒    кнопки передачі дисплеїв;

‒    голосові команди;

‒    перетягування.

Велика частина перерахованих методів реалізуються в SCADA/HMI через стандартні механізми оброблення команд. Наприклад, при натисканні кнопки на дисплеї або комбінації на клавіатурі буде викликана функція відображення конкретного дисплея. Реалізація інших методів (наприклад, голосове керування) може потребувати використання сторонніх засобів, підключених через доступний інтерфейс SCADA/HMI. 

Деякі засоби SCADA/HMI надають вбудовані можливості побудови головних та контекстних меню. Головні меню постійно відображаються на екрані і передбачають навігацію та можливість виклику різноманітних команд, які повинні бути доступні на будь-якому дисплеї. Контекстні меню (відкриваються по правій кнопці миші над об’єктом) передбачають виклик команд залежно від об’єкта, для якого воно було викликане. Контекстне меню передбачає передачу контексту (наприклад, імені тегу) з об’єкта, для якого він був викликаний. Розглянемо приклади варіантів реалізації меню. 

## 5.7.3. Реалізація меню в Citect

Citect SCADA підтримує навігацію через головні меню, зовнішній вигляд яких залежить від стилю, який використовується при створенні проекту. На рис. 5.33 показано приклад фрагмента вигляду та налаштування меню Citect, зробленого в стилі "Tab_Style". Меню має ієрархічний характер і задається таблицею, в якій вказані всі рівні до потрібного пункту. При налаштуванні для кожного рівня вказується напис, для пункту вказується команда, яка буде викликатися, символ (образ), який буде відображатися, і коментар, який буде висвічуватися при наведенні покажчика миші на пункт меню. Можна завдавати умови видимості та доступності меню та сторінки, на яких воно буде відображатися.   

![](media5/5_33.png) 

*Рис.* *5.33.* Вигляд головного меню Citect в стилі Tab_Style 

У стилі "SxW_Style" ієрархічне меню відображається у вигляді дерева (рис. 5.34), але налаштовується аналогічно. У стилі  "Situational Awareness" меню означує наповнення кнопок в області навігації екрана.

Контекстне меню в Citect реалізовується через виклик функції DspPopupMenu, яка призначена як для наповнення елементів меню, так і для оброблення виклику. Для передачі контексту функцію, яка формуватиме меню, можна викликати в джині. Права кнопка миші оброблюється в налаштуваннях клавіатурної команди елемента через команду RBUTTON_UP. 

![](media5/5_34.png) 

*Рис.* *5.3**4**.* Вигляд головного меню Citect у стилі SxW_Style

## 5.7.4. Реалізація меню в zenon

У SCADA zenon головні меню (їх може бути декілька) конфігуруються через відповідний розділ проекту. Редактор меню має інтуїтивно зрозумілий візуальний інтерфейс, пункти меню добавляються і видимі в тому місці, де будуть знаходитися в режимі виконання (рис. 5.35). Кожен пункт має властивості тексту, графічного файлу піктограми, видимості, активності, може бути підменю, може слугувати прапорцем (check mark). Для пункту вибирається тип дії (Action Type): функція, записування значення змінної, виклик довідки або без функції. Для кожного типу в налаштуваннях пункту є своя вкладка з налаштуваннями. Наприклад, для пункту "Hall1" (див. рис. 5.35) в налаштуваннях вказана функція swHall, яка викликає необхідний екран. Для іншого пункту в меню "Змінні", що має властивість "Action Type" рівною "Write Set Value", вказана дискретна змінна і дія переключення (Toggle).     

Для активації головних меню необхідно в налаштуваннях проекту виставити опцію "Main Menu Active". Показується необхідне меню через функцію "Show Menu", яку можна, наприклад, викликати при запуску середовища виконання, помістивши в скрипт AUTOSTART. 

У тому самому розділі, що й головні меню, налаштовуються і контекстні. Для контекстного меню кількість типів дії більша (рис. 5.36) – добавлені команди квітування і виклик макросу VBA. Вибране меню для елементу задається властивістю "Runtime" з групи "Context Menu". Таким чином для різних елементів можна визначати різні контекстні меню.  

Особливістю контекстного меню є можливість отримання контексту з елемента. Наприклад, на рис. 5.36 показано налаштування пункту контекстного меню "Збільшити на 10". У групі властивостей "Write set value" виставлений прапорець "Variable from element". Це значить, що змінна, яка має збільшуватися на 10, буде взята з властивостей "Variable" елемента, для якого меню було викликане. Це саме стосується і файлу допомоги.   

![](media5/5_35.png) 

*Рис.* *5.35.* Налаштування головного меню в zenon

 ![](media5/5_36.png)

*Рис. 5.36.* Налаштування контекстного меню в zenon